# 国内免费部署指南 (推荐)

由于 Streamlit Cloud 在国内访问不稳定，推荐使用以下两个**国内免费平台**。它们速度快、无需翻墙，且提供免费的计算资源。

---

## 推荐一：ModelScope 魔搭社区 (阿里出品)

这是目前国内体验最好的 AI 应用托管平台，提供免费 CPU 资源，支持 Streamlit。

### 部署步骤
1.  **注册账号**: 访问 [modelscope.cn](https://modelscope.cn/) 并注册/登录。
2.  **创建创空间**:
    *   点击顶部导航栏的 **"创空间"** -> **"创建创空间"**。
    *   **英文名称**: 起个名字 (如 `water-monitor`)。
    *   **中文名称**: (如 `地下水监测系统`)。
    *   **接入方式**: 选择 **Streamlit**。
    *   **权限**: 选择 **公开** (Public)。
3.  **上传代码**:
    *   空间创建后，点击 **"文件列表"** -> **"上传文件"**。
    *   **直接把本地文件夹里的这些文件拖进去上传**:
        *   `app.py` (主程序)
        *   `requirements.txt` (Python依赖)
        *   `packages.txt` (中文字体依赖)
        *   `db_manager.py` (数据库逻辑)
        *   `water_env.db` (初始数据库)
        *   `models/` (文件夹)
        *   `uploaded_qr/` (文件夹)
    *   *注意：ModelScope 网页端上传文件夹可能需要一个个建，如果嫌麻烦，可以点击页面上的 "下载/克隆"，用 git 命令上传。*
4.  **启动**:
    *   上传完毕后，系统会自动构建。
    *   点击右上角的 **"启动"** 或 **"重启空间"**。
    *   等待几分钟，点击 **"应用体验"** 标签页即可看到效果。

---

## 推荐二：OpenXLab 浦源 (上海 AI 实验室)

另一个国内优秀的托管平台。

### 部署步骤
1.  **注册**: 访问 [openxlab.org.cn](https://openxlab.org.cn/)。
2.  **创建应用**:
    *   进入 **"应用中心"** -> **"创建应用"**。
    *   **组件**: 选择 **Streamlit**。
    *   **资源**: 选择 **CPU Basic** (免费)。
3.  **上传代码**:
    *   **方式 A (推荐)**: 关联你的 GitHub 仓库（如果你已经把代码传到 GitHub）。
    *   **方式 B**: 在网页上手动上传文件（同 ModelScope）。
4.  **配置**:
    *   **启动文件**: 填写 `app.py`。
    *   **依赖文件**: 填写 `requirements.txt`。
5.  **构建**: 点击立即构建，等待完成。

---

## ⚠️ 关于数据保存 (必读)

**这两个平台（以及 Streamlit Cloud）都是"容器化"的。**
这意味着：当你的应用一段时间没人访问进入"休眠"，或者你更新代码重启后，**容器内的文件会被重置**。

*   **后果**: 用户注册的数据、充值记录、历史计算记录**会丢失**，恢复到你最初上传 `water_env.db` 时的状态。
*   **解决方案**: 
    1.  **演示用**: 无视这个问题，告诉用户数据会重置。
    2.  **长期运营**: 需要将代码中的 SQLite 换成云数据库（如连接到阿里云 RDS 或其他云数据库）。
